<!-- Seção principal da página de alunos -->
<section class="alunos">

  <!-- Cabeçalho com título e botão Novo -->
  <div class="header">
    <!-- Título da tabela/lista -->
    <h2>Alunos</h2>
    <!-- Abre tela/rota de criação -->
    <button type="button" (click)="novoAluno()">Novo Aluno</button>
  </div>

  <!-- Barra de ferramentas com campo de busca -->
  <div class="toolbar">
    <!-- Input controlado: valor atual + dispara busca a cada digitação -->
    <input
      type="text"
      [value]="termoBusca"
      (input)="buscarAluno($event)"
      placeholder="Buscar por nome ou matrícula…" />
  </div>

  <!-- Tabela de alunos -->
  <table class="tabela">
    <thead>
      <tr>
        <!-- Cabeçalhos das colunas -->
        <th>Matrícula</th>
        <th>Nome</th>
        <th>Status</th>
        <!-- Largura fixa para coluna de ações -->
        <th style="width: 220px;">Ações</th>
      </tr>
    </thead>

    <tbody>
      <!-- Linha por aluno paginado -->
      <tr *ngFor="let aluno of alunosPaginados">
        <!-- Coluna: matrícula -->
        <td>{{ aluno.matricula }}</td>
        <!-- Coluna: nome -->
        <td>{{ aluno.nome }}</td>

        <td>
          <span
            class="badge"
            [class.ativo]="aluno.status === 'Ativo'"
            [class.inativo]="aluno.status === 'Inativo'"
            [title]="aluno.status"> <!--adiciona tooltips-->
            {{ aluno.status }}
          </span>
        </td>

        <!-- Coluna: ações (ver, editar, excluir) -->
        <td data-label="Ações">
          <div class="acoes">
            <!-- Ver detalhes -->
            <button
              type="button"
              class="btn-ver"
              aria-label="Ver detalhes"
              title="Ver detalhes"
              (click)="verDetalhes(aluno)">
              <img src="assets/icons/olho.svg" alt="" />
            </button>

            <!-- Editar -->
            <button
              type="button"
              class="btn-editar"
              aria-label="Editar aluno"
              title="Editar"
              (click)="editarAluno(aluno)">
              <img src="assets/icons/lapis.svg" alt="" />
            </button>

            <!-- Excluir -->
            <button
              type="button"
              class="btn-excluir"
              aria-label="Excluir aluno"
              title="Excluir"
              (click)="excluirAluno(aluno)">
              <img src="assets/icons/lixo.svg" alt="" />
            </button>
          </div>
        </td>
      </tr>

      <!-- Linha vazia quando não há resultados e não está carregando -->
      <tr *ngIf="alunosPaginados.length === 0 && !carregando">
        <td colspan="4" class="empty">Nenhum aluno encontrado.</td>
      </tr>
    </tbody>
  </table>

  <!-- Navegação de páginas renderiza se houver mais de 1 página -->
  <nav class="paginacao" *ngIf="totalPaginas > 1">
    <!-- Página anterior -->
    <button type="button" (click)="irParaPagina(paginaAtual - 1)" [disabled]="paginaAtual === 1">«</button>

    <!-- Botões numéricos das páginas -->
    <button
      type="button"
      *ngFor="let p of getPaginas()"
      (click)="irParaPagina(p)"
      [class.active]="p === paginaAtual">
      {{ p }}
    </button>

    <!-- Próxima página -->
    <button type="button" (click)="irParaPagina(paginaAtual + 1)" [disabled]="paginaAtual === totalPaginas">»</button>
  </nav>

  <!--Modal-->
  <app-modal-confirmacao
  [mostrar]="mostrarModal"
  [titulo]="'Confirmar Exclusão'"
  [mensagem]="'Deseja realmente excluir o aluno ' + (alunoParaExcluir?.nome || '') + '?'"

  [nomeBotaoCancelar]="'Cancelar'"
  [nomeBotaoConfirmar]="'Excluir'"
  (confirmar)="confirmarExclusao()"
  (cancelar)="cancelarExclusao()">
</app-modal-confirmacao>

</section>

